<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <!-- iPhone 12 ‡¶∏‡¶π ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶æ‡¶∞‡¶´‡ßá‡¶ï‡ßç‡¶ü ‡¶≠‡¶ø‡¶â‡¶™‡ßã‡¶∞‡ßç‡¶ü -->
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes, viewport-fit=cover">
  <title>AudioQalb ‡¶ï‡ßÅ‡¶á‡¶ú | ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶°‡ßá ‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶ú | ‡ßß‡ß¨:‡ßØ</title>
  <!-- Google Fonts & Font Awesome 6 -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* ---------- ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ---------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 50% 50%, #0b0e14, #030405);
      font-family: 'Cairo', sans-serif;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: fixed; /* iOS ‡¶è ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶Ü‡¶ü‡¶ï‡¶æ‡¶§‡ßá */
    }

    /* ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ú‡ßç‡¶Ø‡¶æ‡¶Æ‡¶ø‡¶§‡¶ø‡¶ï ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (‡¶Ö‡¶§‡¶ø ‡¶∏‡ßÇ‡¶ï‡ßç‡¶∑‡ßç‡¶Æ) */
    body::after {
      content: "";
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.08"><path fill="%23ffd700" d="M50 0L62 35H97L72 55L84 90L50 70L16 90L28 55L3 35H38L50 0Z"/></svg>');
      background-size: 80px 80px;
      pointer-events: none;
      z-index: 1;
    }

    /* ---------- ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ (‡¶ó‡ßç‡¶≤‡¶æ‡¶∏‡¶Æ‡¶∞‡¶´‡¶ø‡¶ú‡¶Æ) ---------- */
    .live-container {
      position: relative;
      z-index: 10;
      width: 95vw;
      max-width: 1600px;
      height: 85vh;
      background: rgba(8, 12, 25, 0.75);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 215, 0, 0.35);
      border-radius: 60px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.7), 0 0 0 1px rgba(255,215,0,0.2) inset;
      display: flex;
      flex-direction: column;
      padding: 30px 50px;
      animation: borderGlow 4s infinite alternate;
      transition: padding 0.3s ease;
    }

    @keyframes borderGlow {
      0% { border-color: rgba(255,215,0,0.25); box-shadow: 0 30px 60px rgba(0,0,0,0.7), 0 0 0 1px rgba(255,215,0,0.15) inset; }
      100% { border-color: rgba(255,215,0,0.6); box-shadow: 0 40px 80px rgba(255,215,0,0.2), 0 0 0 3px rgba(255,215,0,0.2) inset; }
    }

    /* ---------- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ---------- */
    .live-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 15px;
      border-bottom: 2px dashed rgba(255,215,0,0.4);
      margin-bottom: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo i {
      font-size: 60px;
      color: #ffd700;
      text-shadow: 0 0 30px #ffd700;
    }

    .logo span {
      font-size: 48px;
      font-weight: 900;
      background: linear-gradient(145deg, #ffe082, #ffb300);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 2px;
    }

    .day-badge {
      background: rgba(0,0,0,0.6);
      padding: 12px 32px;
      border-radius: 60px;
      font-size: 32px;
      font-weight: 700;
      color: #ffd700;
      border: 1px solid #ffd700;
      box-shadow: 0 0 20px rgba(255,215,0,0.3);
      backdrop-filter: blur(4px);
      white-space: nowrap;
    }

    /* ---------- ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ---------- */
    .question-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.25);
      border-radius: 60px;
      margin: 20px 0;
      padding: 30px 40px;
      border: 1px solid rgba(255,215,0,0.2);
    }

    .question-text {
      font-size: 64px;
      font-weight: 900;
      line-height: 1.4;
      text-align: center;
      color: #fff;
      text-shadow: 0 4px 20px rgba(0,0,0,0.8);
      word-break: break-word;
      animation: fadeSlide 0.8s ease;
    }

    /* ---------- ‡¶Ö‡¶™‡¶∂‡¶® ‡¶ó‡ßç‡¶∞‡¶ø‡¶° (‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü: ‡¶§‡¶ø‡¶® ‡¶ï‡¶≤‡¶æ‡¶Æ) ---------- */
    .options-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      width: 100%;
      margin: 30px 0;
    }

    .option-card {
      background: linear-gradient(145deg, #16202e, #0c111b);
      border: 2px solid rgba(255,215,0,0.3);
      border-radius: 40px;
      padding: 30px 15px;
      font-size: 40px;
      font-weight: 700;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      box-shadow: 0 15px 0 #00000055, 0 0 30px rgba(0,0,0,0.5);
      transition: all 0.2s;
      text-shadow: 0 2px 5px black;
    }

    .option-card i {
      color: #ffd700;
      font-size: 48px;
      filter: drop-shadow(0 0 8px gold);
    }

    .option-card:hover {
      transform: scale(1.02);
      border-color: #ffd700;
      background: rgba(255,215,0,0.15);
    }

    .option-correct {
      background: #1e4a1e !important;
      border-color: #ffd700 !important;
      box-shadow: 0 0 60px #2e7d32, 0 15px 0 #0a2e0a !important;
    }

    /* ---------- ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ---------- */
    .timer-section {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }

    .circular-timer {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .progress-circle {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: conic-gradient(#ffd700 0deg, #2a2a2a 0deg);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.1s linear;
      box-shadow: 0 0 40px rgba(255,215,0,0.4);
    }

    .inner-circle {
      width: 118px;
      height: 118px;
      border-radius: 50%;
      background: #0a0f1e;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 3px solid rgba(255,215,0,0.6);
    }

    .inner-circle span {
      font-size: 58px;
      font-weight: 900;
      color: #ffd700;
      line-height: 1;
    }

    .inner-circle small {
      color: rgba(255,255,255,0.9);
      font-size: 22px;
    }

    /* ---------- ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶ì ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ---------- */
    .audio-control {
      display: flex;
      align-items: center;
      gap: 15px;
      background: rgba(0,0,0,0.5);
      padding: 10px 25px;
      border-radius: 60px;
      border: 1px solid rgba(255,215,0,0.6);
    }

    .audio-control button {
      background: transparent;
      border: none;
      color: #ffd700;
      font-size: 40px;
      cursor: pointer;
      transition: 0.2s;
    }

    .audio-control button:hover {
      color: white;
      text-shadow: 0 0 15px gold;
    }

    .fullscreen-btn {
      background: rgba(0,0,0,0.5);
      border: 2px solid #ffd700;
      color: #ffd700;
      padding: 18px 36px;
      border-radius: 60px;
      font-size: 32px;
      font-weight: 600;
      cursor: pointer;
      backdrop-filter: blur(6px);
      display: flex;
      gap: 15px;
      align-items: center;
      transition: 0.3s;
    }

    .fullscreen-btn:hover {
      background: #ffd700;
      color: black;
      border-color: white;
    }

    /* ---------- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ ---------- */
    .live-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
      color: rgba(255,215,0,0.8);
      font-size: 28px;
    }

    .shuffle-badge {
      background: rgba(255,215,0,0.1);
      padding: 10px 30px;
      border-radius: 50px;
      border: 1px dashed gold;
    }

    @keyframes fadeSlide {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* ---------- ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™/‡¶≤‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶™ (‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®) ---------- */
    @media (max-width: 1200px) {
      .live-container { padding: 25px 35px; }
      .logo span { font-size: 40px; }
      .question-text { font-size: 54px; }
      .option-card { font-size: 32px; padding: 20px; }
      .option-card i { font-size: 40px; }
    }

    /* ---------- ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶ì ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü (‡¶ì‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® ‡¶¨‡ßá‡¶∏‡¶°) ---------- */

    /* ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶ü (‡¶ñ‡¶æ‡¶°‡¶º‡¶æ) ‚Äì ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß´‡ß¶‡ß¶px */
    @media screen and (max-width: 500px), (orientation: portrait) {
      .live-container {
        width: 100vw;
        height: 100vh;
        border-radius: 0;
        padding: 16px 20px;
        max-width: 100%;
      }
      .logo i { font-size: 36px; }
      .logo span { font-size: 28px; }
      .day-badge { font-size: 20px; padding: 8px 16px; }
      .question-text { font-size: 32px !important; line-height: 1.3; }
      .options-row {
        grid-template-columns: 1fr; /* ‡¶è‡¶ï ‡¶ï‡¶≤‡¶æ‡¶Æ */
        gap: 15px;
        margin: 15px 0;
      }
      .option-card { font-size: 24px; padding: 18px 12px; gap: 10px; }
      .option-card i { font-size: 28px; }
      .progress-circle { width: 100px; height: 100px; }
      .inner-circle { width: 82px; height: 82px; }
      .inner-circle span { font-size: 40px; }
      .inner-circle small { font-size: 16px; }
      .audio-control { padding: 6px 15px; }
      .audio-control button { font-size: 28px; }
      .fullscreen-btn { padding: 12px 20px; font-size: 22px; }
      .shuffle-badge { font-size: 18px; padding: 6px 18px; }
      .live-footer { font-size: 18px; flex-wrap: wrap; gap: 10px; }
    }

    /* ‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶∏‡ßç‡¶ï‡ßá‡¶™ (‡¶Ü‡¶°‡¶º‡¶æ‡¶Ü‡¶°‡¶º‡¶ø) ‚Äì ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶§ iPhone 12 ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø */
    @media screen and (orientation: landscape) and (max-width: 900px) {
      .options-row {
        grid-template-columns: repeat(3, 1fr) !important; /* ‡¶§‡¶ø‡¶® ‡¶ï‡¶≤‡¶æ‡¶Æ */
        gap: 20px;
      }
      .question-text { font-size: 42px !important; }
      .option-card { font-size: 28px; padding: 20px; }
      .timer-section { flex-direction: row; align-items: center; }
      .circular-timer { width: auto; }
    }

    /* ---------- iPhone 12 / 13 / 14 ‡¶∏‡ßç‡¶™‡ßá‡¶∏‡¶ø‡¶´‡¶ø‡¶ï ‡¶´‡¶æ‡¶á‡¶®-‡¶ü‡¶ø‡¶â‡¶®‡¶ø‡¶Ç ---------- */
    @media screen and (width: 390px) and (height: 844px) and (orientation: portrait) {
      .question-text { font-size: 32px; }
      .option-card { font-size: 24px; }
    }
    @media screen and (width: 844px) and (height: 390px) and (orientation: landscape) {
      .question-text { font-size: 42px; }
      .option-card { font-size: 28px; }
    }

    /* ---------- iOS Safe Area (‡¶®‡¶ö/‡¶π‡ßã‡¶Æ ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞) ---------- */
    @supports (padding: max(0px)) {
      .live-container {
        padding-left: max(30px, env(safe-area-inset-left));
        padding-right: max(30px, env(safe-area-inset-right));
        padding-bottom: max(20px, env(safe-area-inset-bottom));
      }
    }

    body, html { overflow: hidden; }
  </style>
</head>
<body>

<div class="live-container" id="app">
  <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
  <div class="live-header">
    <div class="logo">
      <i class="fas fa-mosque"></i>
      <span>‡¶Ü‡¶≤‡ßã‡¶ï‡¶ø‡¶§ ‡¶ï‡ßÅ‡¶á‡¶ú</span>
    </div>
    <div class="day-badge" id="ramadanDisplay">
      <i class="fas fa-calendar-alt"></i> ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡ßß‡ß´
    </div>
  </div>

  <!-- ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡¶ï‡ßç‡¶∏ -->
  <div class="question-area">
    <div class="question-text" id="question">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</div>
  </div>

  <!-- ‡¶Ö‡¶™‡¶∂‡¶® (‡ß©‡¶ü‡¶ø) -->
  <div class="options-row" id="optionsRow">
    <div class="option-card" id="optA"><i class="fas fa-cube"></i> A) ...</div>
    <div class="option-card" id="optB"><i class="fas fa-cube"></i> B) ...</div>
    <div class="option-card" id="optC"><i class="fas fa-cube"></i> C) ...</div>
  </div>

  <!-- ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ + ‡¶Ö‡¶°‡¶ø‡¶ì + ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® -->
  <div class="timer-section">
    <div class="circular-timer">
      <div class="progress-circle" id="progressCircle" style="background: conic-gradient(#ffd700 0deg, #2a2a2a 0deg);">
        <div class="inner-circle">
          <span id="timerNumber">15</span>
          <small>‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</small>
        </div>
      </div>
      <div class="shuffle-badge">
        <i class="fas fa-shuffle"></i> ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∂‡¶æ‡¶´‡¶≤
      </div>
    </div>
    
    <div style="display: flex; gap: 20px; align-items: center;">
      <!-- ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ (‡¶Ü‡¶®‡¶Æ‡¶ø‡¶â‡¶ü) -->
      <div class="audio-control">
        <button id="audioToggleBtn">
          <i id="audioIcon" class="fas fa-volume-mute"></i>
        </button>
        <span style="color: white; font-size: 24px;">‡¶®‡¶æ‡¶∂‡¶ø‡¶¶</span>
      </div>
      
      <button class="fullscreen-btn" id="fullscreenBtn">
        <i class="fas fa-expand"></i> ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®
      </button>
    </div>
  </div>

  <!-- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ -->
  <div class="live-footer">
    <span><i class="fas fa-video"></i> YouTube Live 16:9</span>
    <span><i class="fas fa-star"></i> ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ï‡ßÅ‡¶á‡¶ú</span>
  </div>
</div>

<!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶®‡¶æ‡¶∂‡¶ø‡¶¶ (Muted Autoplay) -->
<audio id="backgroundAudio" loop autoplay muted playsinline>
  <source src="https://www.your-server.com/nasheed.mp3" type="audio/mpeg">
  ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
</audio>

<script>
  // ============================================
  // ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶°‡ßá ‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶ú ‡¶ï‡ßÅ‡¶á‡¶ú ‚Äì ‡ßß‡ß¨:‡ßØ ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®
  // Google Apps Script API + GitHub Pages ‡¶∞‡ßá‡¶°‡¶ø
  // ============================================

  // ---------- ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Google Apps Script Web App URL ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶æ‡¶® ----------
  const API_URL = "https://script.google.com/macros/s/AKfycbyw0lNMLsO4lx7vGf6OPHz8Kai3prfoSn7rFH22kvhjouUXJTr528U_HUHeOxxFtSj3tA/exec"; 

  const TOTAL_TIME = 15; // ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°
  let allQuizData = [];
  let quizData = [];
  let currentIdx = 0;
  let timerInterval = null;
  let timeLeft = TOTAL_TIME;
  let isAnswered = false;
  let correctAns = '';

  // DOM ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
  const questionEl = document.getElementById('question');
  const optA = document.getElementById('optA');
  const optB = document.getElementById('optB');
  const optC = document.getElementById('optC');
  const timerSpan = document.getElementById('timerNumber');
  const progressCircle = document.getElementById('progressCircle');
  const ramadanEl = document.getElementById('ramadanDisplay');
  const audioEl = document.getElementById('backgroundAudio');
  const audioToggleBtn = document.getElementById('audioToggleBtn');
  const audioIcon = document.getElementById('audioIcon');

  // ---------- ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶®‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶£‡¶Ø‡¶º (‡¶Ü‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï) ----------
  function getRamadanDay() {
    const now = new Date();
    const ramadanStart = new Date(now.getFullYear(), 2, 11); // 11‡¶á ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶¨‡¶õ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®)
    const diffDays = Math.floor((now - ramadanStart) / (1000 * 3600 * 24)) + 1;
    if (diffDays >= 1 && diffDays <= 30) return diffDays;
    return 15; // ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶´‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï
  }

  function updateRamadanBadge() {
    const day = getRamadanDay();
    ramadanEl.innerHTML = `<i class="fas fa-calendar-alt"></i> ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ${day}`;
  }
  updateRamadanBadge();
  setInterval(updateRamadanBadge, 3600000); // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶Ø‡¶º ‡¶Ü‡¶™‡¶°‡ßá‡¶ü

  // ---------- ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶Æ‡¶ø‡¶â‡¶ü/‡¶Ü‡¶®‡¶Æ‡¶ø‡¶â‡¶ü ----------
  let isAudioMuted = true;

  audioToggleBtn.addEventListener('click', function() {
    if (audioEl.muted) {
      audioEl.muted = false;
      audioIcon.className = 'fas fa-volume-up';
      isAudioMuted = false;
      if (audioEl.paused) {
        audioEl.play().catch(e => console.log('Play failed:', e));
      }
    } else {
      audioEl.muted = true;
      audioIcon.className = 'fas fa-volume-mute';
      isAudioMuted = true;
    }
  });

  // ---------- API ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ----------
  async function fetchQuizzes() {
    try {
      const res = await fetch(API_URL);
      if (!res.ok) throw new Error(`HTTP error ${res.status}`);
      allQuizData = await res.json();
      
      // API ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç
      if (allQuizData.error) {
        questionEl.innerText = '‚ùå ' + allQuizData.error;
        return;
      }

      // 'day' ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï
      const hasDayColumn = allQuizData.length > 0 && allQuizData[0].hasOwnProperty('day');
      
      if (hasDayColumn) {
        const today = getRamadanDay();
        quizData = allQuizData.filter(q => parseInt(q.day) === today);
        if (quizData.length === 0) {
          quizData = [...allQuizData]; // ‡¶´‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï
          console.warn(`No quiz for day ${today}, showing all.`);
        }
      } else {
        quizData = [...allQuizData];
      }

      if (quizData.length) {
        shuffleArray(quizData);
        showQuestion(0);
        startTimer();
      } else {
        questionEl.innerText = '‚ùå ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á';
      }
    } catch (e) {
      console.error(e);
      questionEl.innerText = '‚ö†Ô∏è API ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•, URL ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®';
    }
  }

  // ---------- ‡¶∂‡¶æ‡¶´‡¶≤ (‡¶è‡¶≤‡ßã‡¶Æ‡ßá‡¶≤‡ßã) ----------
  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  // ---------- ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶® ----------
  function showQuestion(index) {
    if (!quizData.length) return;
    const q = quizData[index];
    questionEl.innerText = q.question || '‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶®‡ßá‡¶á';
    optA.innerHTML = `<i class="fas fa-cube"></i> A) ${q.optionA || ''}`;
    optB.innerHTML = `<i class="fas fa-cube"></i> B) ${q.optionB || ''}`;
    optC.innerHTML = `<i class="fas fa-cube"></i> C) ${q.optionC || ''}`;
    correctAns = (q.correct || 'A').toUpperCase();
    removeHighlights();
    isAnswered = false;
  }

  function removeHighlights() {
    optA.classList.remove('option-correct');
    optB.classList.remove('option-correct');
    optC.classList.remove('option-correct');
  }

  // ---------- ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ----------
  function showCorrectAnswer() {
    if (isAnswered) return;
    isAnswered = true;
    const el = document.getElementById(`opt${correctAns}`);
    if (el) el.classList.add('option-correct');
  }

  // ---------- ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ----------
  function startTimer() {
    if (timerInterval) clearInterval(timerInterval);
    timeLeft = TOTAL_TIME;
    updateTimerUI(timeLeft);

    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimerUI(timeLeft);
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        showCorrectAnswer();
        setTimeout(() => {
          nextQuestion();
        }, 3000);
      }
    }, 1000);
  }

  function updateTimerUI(sec) {
    timerSpan.innerText = sec;
    const angle = (sec / TOTAL_TIME) * 360;
    progressCircle.style.background = `conic-gradient(#ffd700 ${angle}deg, #2a2a2a ${angle}deg)`;
    if (sec <= 5) {
      progressCircle.style.boxShadow = '0 0 60px rgba(255,0,0,0.8)';
    } else {
      progressCircle.style.boxShadow = '0 0 40px rgba(255,215,0,0.5)';
    }
  }

  function nextQuestion() {
    currentIdx = (currentIdx + 1) % quizData.length;
    showQuestion(currentIdx);
    startTimer();
  }

  // ---------- ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶ü‡¶ó‡¶≤ ----------
  function toggleFullscreen() {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }

  document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);

  // ---------- ‡¶ì‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ (CSS ‡¶¨‡ßÅ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞) ----------
  function handleOrientationChange() {
    if (window.matchMedia("(orientation: portrait)").matches) {
      document.body.classList.add('portrait');
      document.body.classList.remove('landscape');
    } else {
      document.body.classList.add('landscape');
      document.body.classList.remove('portrait');
    }
  }
  window.addEventListener('orientationchange', handleOrientationChange);
  window.addEventListener('resize', handleOrientationChange);
  handleOrientationChange();

  // ---------- ‡¶¨‡ßÅ‡¶ü‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶™ ----------
  if (API_URL !== "YOUR_API_URL") {
    fetchQuizzes();
  } else {
    questionEl.innerText = 'üîß API_URL ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!';
  }
</script>

<!-- API URL ‡¶∏‡ßá‡¶ü ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ (‡¶°‡ßÅ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶ü ‡¶è‡¶≠‡ßã‡¶Ø‡¶º‡ßá‡¶°) -->
<script>
  if (API_URL === "YOUR_API_URL") {
    document.getElementById('question').innerText = 'üîß ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá index.html-‡¶è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Apps Script URL ‡¶¶‡¶ø‡¶®‡•§';
  }
</script>
</body>
</html>
